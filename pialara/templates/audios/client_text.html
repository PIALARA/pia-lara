{% extends 'layout.html' %}

{% block content %}
    <header class="header">
        <h1 class="text-center">Grabar mi audio</h1>
        <br />
    </header>

    <section class="syllabus m-auto">
        <header class="syllabus__header">
            <h2>Grabar mi audio</h2>
        </header>

        <section class="syllabus__text" id="syllabus-collapse">
            <p class="hide-syllabus-text" id="syllabus-tag">{{ current_user.email }}</p>
            <p class="hide-syllabus-text" id="syllabus-type">frase</p>
            <textarea id="syllabus-text" placeholder="Escribe aquÃ­ tu frase"></textarea>
        </section>
    </section>

    <section class="audio">
        <!--botones audio-->
        <section class="speed-buttons">
            <button class="speed-button" data-speed="0.7">0.7x</button>
            <button class="speed-button" data-speed="1">1x</button>
            <button class="speed-button" data-speed="1.3">1.3x</button>
            </section>
        <!--fin botones audio-->
        <canvas class="visualizer rounded" height="60px"></canvas>
        <audio src="" id="recorded-audio"></audio>

        <button class="record-button" id="record-button">
            <svg width="29" height="28" viewBox="0 0 29 28">
                <defs>
                    <path id="mic-path13"
                          d="M9.333 18.667A4.68 4.68 0 0 0 14 14V4.667A4.68 4.68 0 0 0 9.333 0a4.68 4.68 0 0 0-4.666 4.667V14a4.68 4.68 0 0 0 4.666 4.667zM7 4.667a2.34 2.34 0 0 1 2.333-2.334 2.34 2.34 0 0 1 2.334 2.334V14a2.34 2.34 0 0 1-2.334 2.333A2.34 2.34 0 0 1 7 14V4.667zm11.667 7V14c0 4.783-3.617 8.633-8.167 9.217v2.45H14c.7 0 1.167.466 1.167 1.166S14.7 28 14 28H4.667c-.7 0-1.167-.467-1.167-1.167s.467-1.166 1.167-1.166h3.5v-2.45C3.617 22.633 0 18.667 0 14v-2.333c0-.7.467-1.167 1.167-1.167s1.166.467 1.166 1.167V14c0 3.85 3.15 7 7 7s7-3.15 7-7v-2.333c0-.7.467-1.167 1.167-1.167s1.167.467 1.167 1.167z"></path>
                </defs>
                <g fill="none" fill-rule="evenodd" transform="translate(5)">
                    <mask id="mic-mask13" fill="#fff">
                        <use xlink:href="#mic-path13"></use>
                    </mask>
                    <use xlink:href="#mic-path13"></use>
                    <g fill="#FF4F5E" mask="url(#mic-mask13)">
                        <path d="M-5 0h28v28H-5z"></path>
                    </g>
                </g>
            </svg>
        </button>
    </section>

    <section class="bottom">
        <button class="button send-button" id="send-button">
            <div hidden id="spinner" class="spinner-border spinner-border-sm" role="status">
                <span class="sr-only"></span>
            </div>
            Enviar
        </button>
    </section>

    <script src="https://unpkg.com/sweetalert@2.1.2/dist/sweetalert.min.js"></script>
    <script src="{{ url_for('static', filename='js/speech-synthesis.js') }}"></script>
    <script src="{{ url_for('static', filename='js/speech-recording.js') }}"></script>
{% endblock %}